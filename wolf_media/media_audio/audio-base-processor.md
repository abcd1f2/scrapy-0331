## media-audio audio base processing
- **概述：**
>
>
>
>
>

- **音频特征：**
>       1、Zero Crossing Rate
>           短时平均过零率，即每帧信号内，信号过零点的次数，体现的是频率特性
>       2、Energy
>           短时能量，即每帧信号的平方和，体现的是信号能量的强弱
>       3、Entropy of Energy
>           能量熵，跟频谱的谱熵（Spectral Entropy）有点类似，不过它描述的是信号的时域分布情况，体现的是连续性
>       4、Spectral Centroid
>           频谱中心又称为频谱一阶距，频谱中心的值越小，表明越多的频谱能量集中在低频范围内，如：voice与music相比，通常spectral centroid较低
>       5、Spectral Spread
>           频谱延展度，又称为频谱二阶中心矩，它描述了信号在频谱中心周围的分布状况
>       6、Spectral Entropy
>           谱熵，根据熵的特性可以知道，分布越均匀，熵越大，能量熵反应了每一帧信号的均匀程度，如说话人频谱由于共振峰存在显得不均匀，
>               而白噪声的频谱就更加均匀，借此进行VAD便是应用之一
>       7、Spectral Flux
>           频谱通量，描述的是相邻帧频谱的变化情况
>       8、Spectral Rolloff
>           频谱滚降点
>       9~21、MFCCs
>           梅尔倒谱系数，是非常重要的音频特征
>       22~33 Chroma Vector
>           这个有12个参数，对应就是12级音阶
>       34 Chroma Deviation
>           就是Chroma Vector的标准方差
>
>

- **语音特征：**
>       常见的语音特征：
>           1、过零率
>               过零率体现的是信号过零点的次数，体现的是频率特性。因为需要过零点，所以信号处理之前需要中心化处理
>           2、短时能量
>               短时能量体现的是信号在不同时刻的强弱程度
>           3、短时自相关函数
>               学过信号处理的都应该知道，信号A与信号B翻转的卷积（卷积也可以借助FFT快速实现），就是二者的相关函数
>           4、短时平均幅度差
>               音频具有周期特性，平稳噪声情况下利用短时平均幅度差可以更好地观察周期特性
>           前面四个都是信号的时域分析，音频信号更多是在时频域分析，常用的有：
>               STFT（短时傅里叶变换）、小波变换、ST、W-V变换
>           5、语谱图（基于FFT）
>               有时FFT也换成DCT实现，FFT延展与DCT是等价的
>               基于FFT语谱图的定义：
>                   就是分帧，对每一帧信号FFT，然后求绝对值/平方
>               理论分析：
>                   给出示意图,语音分帧→每一帧分别FFT→求取FFT之后的幅度/能量，这些数值都是正值，类似图像的像素点，显示出来就是语谱图
>               常用对数谱，有时对数中添加常数项
>           6、短时功率谱密度
>               可见对于有限的信号，功率谱之所以可以估计，是基于两点假设：
>                   (1)、信号平稳
>                   (2)、随机信号具有遍历性
>               A、功率谱密度
>                   a、周期图法
>                       已知N个采样点的信号，对其进行傅里叶变换，进一步得到功率谱密度
>                       按照上文分析相关函数的思路，给出一个分析，如下图，
> ![avatar](https://github.com/nwaiting/wolf-ai/blob/master/wolf_others/media_pic/media_audio_auto_correlation.png)
>                       就是信号u的相关函数就是u卷积上u的翻转，而相关函数与功率谱密度是互为傅里叶变换。u对应傅里叶变换U，u的翻转对应U的共轭，
>                           时域的卷积对应频域的相乘，就得到了功率谱估计的表达式，同样代码实现依然可以借助上文分析相关函数的特性加以分析
>                       结论：
>                           功率谱密度与相关函数对应，而相关函数是统计信息，按前文提到的，它是建立在信号平稳的假设之上。如果信号不够平稳呢？
>                           周期图法的思路显然是不适用的，Welch就是对这一问题的改进
>                   b、平均周期图法（Welch）
>                       与周期图谱求功率谱密度不同，Welch不再从整个时间段考虑，而是做了三点改进：
>                           (1)、截断，将这个信号分成多个片段
>                           (2)、加窗：因为截断，截断就要泄露，通常都选择加窗处理
>                           (3)、重叠：截断之后，为了防止相邻两段差异过大，通常插值平滑处理，也就是取重叠
>                       简单理解为：（参考）
>                           分段的每一段用周期图法得到功率谱密度，然后加权平均
>               B、短时功率谱密度
>                   按前面分析，周期图法针对的是平稳信号，而Welch虽然考虑了非平稳的特性，但分段的数量通常较小，每一段的长度较大，对音频信号而言，这也是不够的。
>                   音频信号可以看作短时间的近似平稳（如一帧信号），对每一帧利用周期图法分析，这个就是短时功率谱密度的思路。
>                   通常为了防止一帧的信号不够平稳，每一帧也可以进一步利用Welch方法处理
>           7、谱熵
>               谱熵的定义：
>                   首先对每一帧信号的频谱绝对值归一化，这样就得到了概率密度，进而求取熵
>               理论分析：
>                   对于信号，如果是白噪声，频谱类似均匀分布，熵就大一些；如果是语音信号，分布不均匀，熵就小一些，利用这个性质也可以得到一个粗糙的VAD（有话帧检测）
>               谱熵有许多的改进思路：
>                   滤波取特定频段、设定概率密度上限、子带平滑谱熵，自带平滑通常利用拉格朗日平滑因子，这是因为防止某一段子带没有信号，
>                       这个时候的概率密度就没有意义了，这个思路在利用统计信息估计概率密度时经常用到，比如朴素贝叶斯就用到这个思路。
>           8、基频
>               基频：也就是基频周期
>               人在发音时，声带振动产生浊音(voiced)，没有声带振动产生清音（Unvoiced）
>               故浊音波形呈现一定的准周期性。所谓基音周期，就是对这种准周期而言的，它反映了声门相邻两次开闭之间的时间间隔或开闭的频率。
>               基音提取常用的方法有：
>                   (1)、倒谱法
>                   (2)、短时自相关法
>                   (3)、短时平均幅度差法
>                   (4)、LPC法
>           9、共振峰
>               当声门处准周期脉冲激励进入声道时会引起共振特性，产生一组共振频率，这一组共振频率称为共振峰频率或简称共振峰
>               共振峰参数包括共振峰频率和频带的宽度，它是区别不同韵母的重要参数，由于共振峰包含在语音的频谱包络中，
>                   因此共振峰参数的提取关键是估计自然语音的频谱包络，并认为谱包括的极大值就是共振峰，通常认为共振峰数量不超过4个
>               对这个模型抽象，通常由两个思路：
>                   (1)、声管模型
>                   (2)、声道模型
>                       认为信号经过与声道的卷积，得到最终发出的声音。声道就是系统H
>               共振峰的求解思路非常多：
>                   基于LPC内插
>               按照时域里信号与声道卷积的思路，频域就是信号与声道相乘，所以声道就是包络
>               利用线性预测系数（LPC）并选择适当阶数，可以得到声道模型H
>               利用LPC得出的包络，找到四个峰值，就已经完成了共振峰的估计。为了更精确地利用LPC求取共振峰有，两种常用思路：
>                   (1)、抛物线内插法
>                   (2)、求根法
>               预加重：
>                   为了更好地估计声道，这里用了预加重，因为类似电磁波等信号，波信号传播过程中高频分量衰减更大，所以需要对高频进行一定程度的提升，这个操作叫做预加重
>               基音周期与共振峰不是一回事啊！有时为了表征声道特性，也可以直接利用LPC系数作为特征，而不必求取共振峰
>
>
>       短时平均能量用途：
>           (1)、可以作为区分清音和浊音的特征参数
>           (2)、在信噪比比较高的情况下，短时能量可以作为区分有声和无声的依据
>           (3)、可以作为辅助的特征参数用于语音识别中
>
>       为什么要进行STFT？（参考）
>           1、传统FFT只能看到信号频率的特性，时域信号只能观察时域特性，都是一维的情况，如果二维联合观察？这个时候STFT就可以实现
>           2、语音是非平稳信号，比如求相关矩阵，理论上是E{.}求取均值的形式，通常无法得出概率密度，往往有数据近似：（略）
>               这个式子能够近似相关矩阵，有两个前提条件：
>                   a)信号平稳，这样才能保证统计特性一致；
>                   b)遍历性，这个时候才能保证统计没有以偏概全
>               但语音信号是非平稳信号，直接求取相关矩阵理论上没有意义，其他统计信息也有类似的特性。
>               但语音变化缓慢，可以认为是短时平稳，即在短的时间内（如20~30ms）是平稳的，这个时候平稳+遍历性的假设，就可以让我们借助观测数据估计统计信息。
>               这个短时平稳的划分就是信号分帧。进一步：分帧信号分别FFT，就是STFT。
>
>       信号分帧：
>           加窗截断分帧，如下图，
> ![avatar](https://github.com/nwaiting/wolf-ai/blob/master/wolf_others/media_pic/media_audio_frame_split.png)
>           为什么要有帧移量？即帧与帧之间有部分重叠？
>               从上面中间图可以看出，加窗阶段后相邻两帧在端点处变化较大，对于变化较大的情况一般思路就是平滑，比如进行插值处理，其实帧移的操作就是插值呀
>
>
>

- **语音信号：**
>       语音信号的数字模型由三个部分组成：
>           1、激励模型
>               发浊音时声带的不断开启和关闭将产生间歇的脉冲波。这个脉冲波类似于斜三角形脉冲串
>               发清音时，可等效成随机白噪声
>           2、声道模型
>               声道部分的数学模型目前有两种观点，
>                   a、一种是将声道视为多个不同截面积的管子串联而形成的系统，即“声管模型”，
>                   b、一种是将声道视为一个谐振腔，即“共振峰模型”
>           3、辐射模型
>               辐射模型表征口和唇的辐射效应和圆形头部的绕射效应
>        语音信号：S(z) = U(z)*G(z)*R(z)
>

- **语音的一些基本名词：**
>       音素：
>           语音中最小的基本单位是音素，音素是人类能区别一个单词和另一个单词的基础。
>           音素构成音节，音节又构成不同的词和短语。！！！
>           音素又分为元音和辅音
>           元音：
>               元音，又称母音，是音素的一种，与辅音相对
>               元音是在发音过程中由气流通过口腔而不受阻碍发出的音
>               不同的元音是由口腔不同的形状造成的。（元音和共振峰关系密切）
>               而多数语言中的元音均为浊音。浊音具有周期性。
>           辅音：
>               气流在口腔或咽头受到阻碍而形成的音叫做辅音，又叫子音
>               不同的辅音是由发音部位和发音方法的不同造成的
>
>           清音和浊音的概念在文献中涉及较多
>           清音：
>               严格来讲，很多特征的提取都需要区分清音和浊音。
>               当气流通过声门时,如果声道中某处面积很小，气流高速冲过此处时产生湍流，当气流速度与横截面积之比大于某个临界速度便产生摩擦音，即清音。
>               简单来说，发清音时声带不振动，因此清音没有周期性。清音由空气摩擦产生，在分析研究时等效为噪声。
>           浊音：
>               语音学中，将发音时声带振动的产生音称为浊音。
>               辅音有清有浊，而多数语言中的元音均为浊音。浊音具有周期性。
>

- **语音特征：**
>       声强：
>           在物理学中，把单位时间内通过垂直于声波传播方向的单位面积的平均声能，称为声强
>           声强用I表示，单位为瓦/平米
>           实验的研究表明，人对声音强弱的感觉并不是与声强成正比，而是与其对数成正比的。所以一般声强用声强级来表示：
>               SIL=10lg[I/I’]=10lg(I/I’)
>           式中I为声强，I’=10e-12瓦/平米称为基准声强，声强级的常用单位是分贝(dB)
>
>       响度：
>           响度时一种主观心理量，是人类主观感觉到的声音强弱程度。
>           一般来说，声音频率一定时，声强越强，响度也越大。
>           但是响度与频率有关，相同的声强，频率不同时，响度也可能不同。
>           响度若用对数值表示，即为响度级，响度级的单位定义为方，符号为phon。
>           根据国际协议规定，0dB声级的1000Hz纯音的响度级定义为0 phon，n dB声级的1000Hz纯音的响度级就是n phon。
>               其它频率的声级与响度级的对应关系要从等响度曲线查出。
>
>       音高：
>           音高也是一种主观心理量，是人类听觉系统对于声音频率高低的感觉。
>           音高的单位是美尔（Mel）。响度级为40 phon，频率为1000Hz的声音的音高定义为1000Mel。
>

- **基音周期和基音频率：**
>       基音周期和基音频率：
>           人在发音时，声带振动产生浊音（清音由空气摩擦产生）。
>           浊音的发音过程是：来自肺部的气流冲击声门，造成声门的一张一合，形成一系列准周期的气流脉冲，经过声道（含口腔、鼻腔）的谐振及唇齿辐射最终形成语音信号。
>               故浊音波形呈现一定的准周期性。所谓基音周期，就是对这种准周期而言的。它反映了声门相邻两次开闭之间的时间间隔或开闭的频率。
>
>           基音周期是语音信号最重要的参数之一，它描述了语音激励源的一个重要特征。
>           基音周期信息在语音识别、说话人识别、语音分析与语音合成，以及低码率语音编码、发音系统疾病诊断、听觉残障者的语言指导等多个领域有着广泛的应用。
>           （因为女性基频比男性高，所以有些算法中使用基频来区分性别，还挺准的）
>
>       基音周期的估算方法：
>           基音周期的估算方法很多，比较常用的有：
>               1、自相关法
>               2、倒谱法（我们提基频用的倒谱法）
>               3、平均幅度差函数法
>               4、线性预测法
>               5、小波—自相关函数法
>               6、谱减—自相关函数法
>
>       自相关法提取基频：
>           1、预处理
>               为了提高基音检测的可靠性，有人提出了端点检测和带通数字滤波器两种预处理方法对原始信号进行预处理。
>               在提取基频时端点检测比一般端点检测更为严格（一般端点检测会保留语音有话段的头和尾，以避免把有用信息当作噪声滤除，但头和尾不包括基频信息，
>                   所以在进行提取基音的端点检测时阈值设定更为严格，滤去头部和尾部）
>               用带通滤波器预处理的目的是为了防止共振峰第一峰值的干扰，一般带通滤波器的频率范围选为60~500Hz。
>           2、自相关法
>               短时自相关函数的定义为（略），其中k是时间的延迟量，N为帧长
>               短时自相关函数具有以下重要性质：
>                   a、若当原信号具有周期性，那么它的自相关函数也具有周期性，并且周期性与原信号的周期相同。且在K等于周期整数倍时会出现峰值。
>                   b、清音信号无周期性，它的自相关函数会随着K的增大呈衰减趋势，浊音具有周期性，它的R（k）在基因周期整数倍上具有峰值，
>                       通常取第一最大峰值点作为基因周期点。自相关函数法基音检测正是利用这一性质来进行基因周期检查的。
>

- **信噪比：**
>       信噪比的计量单位是dB，其计算方法是10lg(PS/PN)，其中PS和PN分别代表信号和噪声的功率（用能量也是一样的）
>       计算公式：
>           SNR = 10log((∑x^2(n))/(∑(y(n)-x(n))^2))
>           在噪声和语音完全混杂的情况下信噪比很难计算，在预知噪声的情况下，可以用实际信号（纯语音+噪声）减去噪声，得到近似的纯语音信号。
>               从而通过进一步计算求得信噪比。在实验中所采集的信号信噪比低时在10几dB，信噪比高时在30dB以上。
>

- **医学中常用的检查嗓部病变的特征：**
>       1、谐噪比
>           HNR（Harmonics-to-Noise ratio）是语音中谐波成分和噪声成分的比率。
>           是检测病态嗓音和评价嗓音素质的一个客观指标，能有效地反应声门闭合情况。
>           需要注意的是这里的噪声不是环境噪声，而是发声时由于声门非完全关闭引起的声门噪声。
>       2、频率微扰（jitter）
>           频率微扰是描述相邻周期之间声波基本频率变化的物理量。
>           主要反映粗糙声程度，其次反映嘶哑声程度。
>           语音信号中的频率微扰与声门区的功能状态是一致的。
>           正常嗓音周期间的频率相同者较多，不同者甚少，因此频率微扰值很小。当发生声带病变时，微扰值增大，使声音粗糙。
>       3、振幅微扰（shimmer）
>           振幅微扰描述相邻周期之间声波幅度的变化，主要反映嘶哑声程度。
>           Jitter和shimmer共同反映声带振动的稳定性，其值越小说明在发声过程中声学信号出现的微小变化越少。
>       4、规范化噪声能量（NNE）
>           主要计算发声时由于声门非完全关闭引起的声门噪声的能量。
>           主要反映气息声程度，其次是嘶哑声程度，一定程度上反映声门的关闭程度，对由于声带器质性或功能性病变而产生的病理嗓音的分析很有价值。
>

- **梅尔倒谱系数（Mel-scale Frequency CepstralCoefficients, MFCC）：**
>       一、在语音识别（Speech Recognition）和话者识别（Speaker Recognition）方面，最常用到的语音特征就是梅尔倒谱系数。
>           梅尔倒谱系数是在Mel标度频率域提取出来的倒谱参数，Mel标度描述了人耳频率的非线性特性，它与频率的关系可用下式近似表示：
>               Mel(f) = 2595 * lg(1 + f/700)
>               其中f为频率，单位为Hz
>
>       二、计算方法：
>           1、预加重
>               预加重处理其实是将语音信号通过一个高通滤波器：
>               H(z) = 1 - uz^(-1)
>               其中μ的值介于0.9-1.0之间，我们通常取0.96。预加重的目的是提升高频部分，使信号的频谱变得平坦，移除频谱倾斜，
>                   来补偿语音信号受到发音系统所抑制的高频部分。同时，也是为了消除发生过程中声带和嘴唇的效应。（因为口唇辐射可以等效为一个一阶零点模型）
>           2、分帧、加窗，快速傅里叶变换
>               因为语音信号为短时平稳信号，所以需要进行分帧处理，以便把每一帧当成平稳信号处理。同时为了减少帧与帧之间的变化，相邻帧之间取重叠。
>               一般帧长取25ms，帧移取帧长的一半。
>           3、Mel滤波器组
>               在语音的频谱范围内设置若干带通滤波器 ，M为滤波器的个数。每个滤波器具有三角形滤波器的特性，其中心频率为（略），
>               在Mel频谱范围内，这些滤波器是等带宽的。每个带通滤波器的传递函数为：
>                   （略）
>               三角带通滤波器有两个主要目的：
>                   (1)、对频谱进行平滑化，并消除谐波的作用。
>                   (2)、此外还可以减少运算量。
>           4、计算每个滤波器组输出的对数能量为
>               s(m) = （略）
>           5、经离散余弦变换（DCT）得到MFCC系数
>               C(n) = （略）
>               将上述的对数能量带入离散余弦变换，求出L阶的Mel-scale Cepstrum参数。L阶指MFCC系数阶数，通常取12-16。这里M是三角滤波器个数。
>       三、能量特征
>           1、短时能量
>               短时能量的计算方法比较简单，即取一帧信号，通过短时能量计算公式计算即可
>           2、短时平均幅度
>
>
>

- **待续：**
>       参考：https://blog.csdn.net/qq_25867649/article/details/79169811   语音识别-特征提取
>           https://www.cnblogs.com/xingshansi/p/6815217.html   音频特征提取——常用音频特征
>           https://www.cnblogs.com/xingshansi/category/979728.html     音频系列文章
>           https://blog.csdn.net/w_manhong/article/details/78977833    语音识别之特征参数提取（一）
>           https://blog.csdn.net/aiyh0202/article/details/52848305     音频频谱图
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
