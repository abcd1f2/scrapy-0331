## NLP-常用技术学习 - 句法分析
- **概述**：
>       当学习了句法分析后，我们应该知道下面的答案：
>           如何使用形式化语法来描述无限的句子集合的结构？
>           如何使用句法树来表示句子结构？
>
>       90年代文法分析都是上下文无关文法，后来发现依存文法树标注简单，parser准确率高，所以后来基本上是依存文法树的天下。！！！
>
>       句法分析的NLP中的关键底层技术之一，其基本任务是确定句子的句法结构或者句子中词汇之间的依存关系。
>       句法分析：
>           句法结构分析
>           依存关系分析
>
>       短语结构分析或成分结构分析：（即上下文无关文法）
>           以获取整个句子的句法结构或者完全短语结构为目的句法分析
>       依存分析：（用单词之间的依存关系来表达语法。如果一个单词修饰另一个单词，则称该单词依赖于另一个单词）
>           获取局部成分为目的的句法分析
>

- **依存句法目前的应用：**
>       注：！！！！！
>           目前的句法分析以及从句法结构分析转向依存句法分析，主要有以下原因：
>               1、**因为通用数据集TreeBank的发展**，虽然该数据集的标注比较复杂，但是其标注结果可以用作多种任务（命名实体识别或词性标注），而且作为不同任务的评估数据，因而得到越来越多的发展
>               2、句法结构分析的语法集是由固定的语法集组成，较为固定和呆板
>               3、依存句法分析树标注简单且parser准确率高
>
>
>

- **计算机进行文法分析：**
>       需要解决的两个问题：
>           1、文法在计算机中的存储方式以及语料数据集
>               语法树来表示和存储语法结构
>               如下图：
>                   S：表示句子
>                   NP、VP、PP是名词短语、动词短语、介词短语，都是短语级别
>                   N、V、P分别是名词、动词、介词
>![avatar](https://github.com/nwaiting/wolf-ai/blob/master/wolf_others/pic/CFG.png)
>
>               现在网上有比较成熟的、手工标注的语料数据集
>           2、文法解析的算法
>               a、Constituency = phrase structure grammar = context-free grammars (CFGs) 上下文无关
>                   用固定数量的rule分解句子为短语和单词、分解短语为更短的短语或单词等更小的单元。
>               b、依存句法分析
>                   用单词之间的依存关系来表达语法。
>

- **CFG上下文无关文法：**
>       CFG是一个四元组：G=(N,T,P,S)
>           N：非终结符的有限集合（就是NP、VP、PP、和N等的集合）
>           T：终结符的有限集合（就是我们的单词）
>           P：产生式的有限集合
>           S：非终结符，称为文法的开始符号
>
>       定义四元组的作用：
>           定义四元组，主要是为了使用分析树表示文法，即句法树的结构。
>
>       句法分析树的定义：
>           略
>           句法树有一个重要的点：要求产生式的左部有且仅有一个非终结符
>
>

- **CFG上下文无关文法-句法树解析：**
>       1、递归下降解析器
>           递归下降分析是一种自上而下分析。自上而下分析器在检查输入之前先使用文法预测输入将是什么。
>           缺点：
>               a、左递归产生式：NP->NP PP 会陷入死循环
>               b、处理不符合句子的词和结构时浪费时间
>               c、回溯过程会丢掉计算过的分析，重新计算
>       2、移进-归约解析器
>           移进-归约是一种自下而上分析器。
>           原理：
>               尝试找到对应文法产生式右侧的词和短语的序列，用左侧的替换它们，直到整个句子归约为一个句子S。
>               这种替换前n项为一项的操作就是归约操作。！！！
>           缺点：
>               1、由于堆栈的特殊性，只能找到一种解析
>               2、不能保证一定能找到解析
>       3、左角落分析器
>           递归下降分析器的问题之一是当它遇到一个左递归产生式时，会进入无限循环。
>           这是因为它盲目应用文法产生式而不考虑实际输入的句子。
>           左角落分析器是自下而上与自上而下方法的混合体。！！！
>
>           左角落分析器是一个带自下而上过滤的自上而下的分析器，不像普通的递归下降分析器，它不会陷入左递归产生式的陷阱。
>
>
>

- **依存关系和依存文法：**
>       依存文法存在一个共同的基本假设：！！！
>           文法结构本质上包含词和词之间的依存（修饰）关系。
>
>       依存句法核心动词：
>           主张句子中核心动词是支配其他成分的中心成分。
>           核心动词本身不受其他任何成分的支配，所有受支配成分都以某种关系从属于支配者
>
>       五个条件：
>           1、一个句子中只有一个成分是独立的
>           2、句子的其他成分都从属于某一部分
>           3、任何一个成分都不能依存于两个及以上的成分
>           4、句子中成分的投射性
>           5、中心成分左右两边的其他成分互相不发生关系
>
>       一个依存关系连接两个词，分别是核心词和依存词。
>       依存关系可以细分为不同的类型，表示两个词之间的具体句法关系。
>       依存关系表示一个加标签的有向图，节点是词汇项，加标签的弧表示依赖关系。
>
>       目前研究主要集中在数据驱动的依存文法分析方法，即在训练实例集合上学习得到依存文法分析器，而不涉及依存语法理论研究。！！！
>       优点：
>           1、给定较大规模数据，不需要人工干预，就可以得到比较好的模型
>           2、很容易应用到新领域和新语言环境
>       数据驱动的依存文法分析主要有两种方法：
>           1、基于图(graph-based)的分析方法
>           2、基于转移(transition-based)的分析方法
>

- **依存关系和依存文法-基于图的依存句法分析：**
>       可以将基于图的分析方法看成是从完全有向图中寻找最大生成树的问题。！！！
>
>       基于图的分析模型可以区分为：
>           一阶模型
>           高阶模型：
>               使用更复杂的子树特征，分析准确率更高，解码算法效率降低
>
>       解码：
>           基于动态规划的解码算法
>           也有一些学者采用柱搜索（beam search）来提高效率
>
>       学习特征权重：
>           学习特征权重，通常采用在线训练算法，如平均感知器（average dperceptron）
>
>       基于图的句法分析算法有：
>           1、自顶向下
>           2、自底向上
>           3、最大生成树
>       如：在使用最大熵算法进行依存句法分析时就是生成一系列句法树，使用最大熵模型去计算单条依存边的概率，从里面挑选出概率最大的那一棵作为输出。
>
>

- **依存关系和依存文法-基于转移的分析方法**
>       基于转移的方法将依存树的构建过程建模为一个动作序列，将依存分析问题转化为寻找最优动作序列的问题。！！！
>       早期，研究者使用局部分类器（如支持向量机）来决定下一个动作。
>       近年来，采用全局线性模型来决定下一个动作，一个依存树的分值由其对应的动作序列中的每一个动作的分值累加得到。
>       特征利用：
>           基于转移的方法可以充分利用已形成的子树信息，从而形成丰富的特征，以指导决策下一个动作。
>       解码：
>           模型通过贪心搜索或者柱搜索等解码算法找到近似最优的依存树
>       学习特征权重：
>           基于转移的方法通常也采用在线训练算法学习特征权重
>       原理：
>           是基于动作（即转移）和一个分类器实现的，仿照人类从左到右的阅读顺序不断读入单词，根据改单词和已构建的句法子树等信息建立分类模型，
>           分类模型输出当前状态下的最佳动作，然后分析器根据最佳动作"拼装"句法树
>       基于转移的依存句法分析方法有两种：
>           基于栈的方法
>               arc-standard算法（**后面的神经网络就是按照这个算法的套路来的**）
>               arc-eager算法
>           基于列表的方法
>
>       投射和非投射：
>           投射性：
>               如果词p依存于词q，那么q和p之间的任意词r就不能依存到p和q所构成的跨度之外，就是不存在交叉的依存狐
>
>
>

- **依存关系和依存文法-多模型融合的依存句法分析**
>       基于图的依存句法分析特点：
>           进行全局搜索，但是只能利用有限的子树特征
>       基于转移的分析方法特点：
>           搜索空间有限，但可以充分利用已构成的子树信息构成丰富的特征
>
>       比较发现，这两种方法存在不同的错误分布。！！！
>
>       使用不同的方法融合两种模型的优势，常见的方法有：
>           stacked learning
>           对多个模型的结果加权后重新解码（re-parsing）
>           从训练语料中多次抽样训练多个模型（bagging）
>
>

- **语义依存分析（Semantic Dependency Parsing，SDP）**
>       语义依存分析，分析句子各个语言单位之间的语义关联，并将语义关联以依存结构呈现。
>       优点：
>           使用语义依存刻画句子语义，好处在于不需要去抽象词汇本身，而是通过词汇所承受的语义框架来描述该词汇，而论元的数目相对词汇来说数量总是少了很多的。
>           语义依存分析目标是跨越句子表层句法结构的束缚，直接获取深层的语义信息。
>           如下图，三个句子，用不同的表达方式表达了同一个语义信息：
>
> ![avatar](https://github.com/nwaiting/wolf-ai/blob/master/wolf_others/pic/senmantic_pic.png)
>
>           张三实施了一个吃的动作，吃的动作是对苹果实施的。
>
>       语义依存与句法依存区别：
>           语义依存不受句法结构的影响，将具有直接语义关联的语言单位直接连接依存狐并标记上相应的语义关系。！！！
>           1、句法依存某种程序上更重视非实词（如介词）在句子结构分析中的作用，
>              而语义依存更倾向在具有直接语义关联的实词之间建立直接依存弧，非实词作为辅助标记存在
>           2、句法和语义依存弧上标记的语义关系完全不同，
>              语义依存关系是由论元关系引申归纳而来。可以用来回答问题，如：我在哪里喝汤，我在用什么喝汤，谁在喝汤等
>              但是句法依存没有这个能力
>
>       语义依存与语义角色标注关系：
>           语义依存与语义角色标注之间也存在关联
>           1、语义角色标注只关注句子主要谓词的论元以及谓词与论元之间的关系
>           2、语义依存不仅关注谓词与论元的关系，还关注谓词与谓词之间、论元与论元之间，论元内部的语义关系。语义依存对句子语义信息的刻画更加完整全面。！！！
>
>       语义依存关系分为3类：
>           1、主要语义角色
>               每一种语义角色对应存在一个嵌套关系和反关系
>           2、事件关系
>               描述两个事件间的关系
>           3、语义依附标记
>               标记说话者语气等依附性信息
>

- **句法分析方法：**
>       1、PCFG（概率上下文无关文法）（**深度学习爆发前性能最优秀的CFGs分析方法**）
>           如何寻找概率最大的句法分析树结构？
>               a、暴力搜索
>               b、动态规划CKY算法
>           缺点：
>               a、词的选择有很强的独立性假设，完全依赖于当前的词性
>               b、对结构偏好不敏感
>                   对于存在歧义的两个句子，具有完全相同的树形结构
>       2、Lexical PCFG（基于词典的上下文无关文法）   
>           基于Lexical PCFG的参数估计
>               对于如何寻找概率最大的句法分析树结构的问题，和PCFG相同，采用动态规划思想
>       3、Transition-based Parsing（基于贪心决策动作拼装句法树）（主流的依存句法分析方法）
>

- **待续：**
>       参考：
>       https://blog.csdn.net/qq_28031525/article/details/79187080   NLP底层技术之句法分析
>       https://www.jianshu.com/p/2a07c77b460a  自然语言处理学习笔记（八）—— 句法分析
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
