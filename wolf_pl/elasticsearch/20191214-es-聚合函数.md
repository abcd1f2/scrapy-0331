# elasticsearch 学习 - 聚合函数
- **概述：**
>       
>
>       
>
>       
>

- **聚合函数：**
>       1、
>       {
>           "size": 0,  #表示不返回数据内容，即返回数据内容条数为0，只返回后面的计算结果内容
>           "aggs": {
>               "avg_price":{   #别名，随意取名
>                   "avg": {
>                       "field": "字段名"
>                   }
>               }
>           }
>       }
>       
>       "aggs" 控制聚合函数
>
>       2、      
>       对多条件结果执行聚合函数：
>       （注意：是对查询结果进行聚合函数处理，可以自己先验证一下）
>       {
>           "query":{
>               "bool":{
>                   "must":[
>                       {
>                           "match":{
>                               "字段1":"字段值1"
>                           }
>                       }
>                   ],
>                   "filter":{
>                       "range":{
>                           "字段名":{
>                               "gte": 100      #条件
>                           }
>                       }
>                   }
>               }
>           },
>           "aggs":{
>               "price_sum":{
>                   "sum":{
>                       "field":"price"
>                   }
>               }
>           }
>       }
>       
>       3、分段，对每个分段进行聚合函数
>       {
>           "size":0.
>           "aggs":{
>               "price_delta"：{  #分段别名
>                   "range":{
>                       "field":"price",  #分段属性字段
>                       "rangs":[
>                           {
>                               "from":0,   #分段区域值
>                               "to":50     #分段区域值
>                           },
>                           {       
>                               "from":50,
>                               "to":100
>                           }，
>                           {
>                               "from":100,
>                               "to":150
>                           }
>                       ]
>                   },
>                   "aggs":{        #与range平级的aggs
>                       "price_sum":{
>                           "sum":{
>                               "field":"price"
>                           }
>                       }
>                   }
>               }
>           }
>       }
>       
>
>       
>
>       

- **待续：**
>       参考：
>       
>
>       
>
>       
>
>       
>
>       
>
>       
>
>       
>
>       
>
