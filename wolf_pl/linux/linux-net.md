## linux - net
- **概述：**
>
>
>

- **epoll的同步：**
>       select/poll/epoll的意义在于同时等待多个socket上的活动。select/poll/epoll永远都是阻塞的，跟socket是否阻塞无关
>
>       nginx会一直（阻塞）等待epoll返回事件通知或者epoll_wait超时
>       每当有新连接到来时，就会把read/write事件跟对应的socket关联起来，然后放入epoll事件队列中。
>       timer事件由模块开发者自行创建然后通过相关的API投入到epoll事件队列中
>
>       开发者必须保证每一个事件handler都不得包含任何阻塞调用。否则，nginx worker的主线程将会因为一个事件阻塞，导致队列里面可能还有一大堆事件不能及时处理，这会严重影响nginx的效率
>       这也就是为什么socket不能设置为阻塞的原因，如果socket是阻塞的，那么一个socket的IO事件就会阻塞后续所有的事件处理，CPU就会空转，等在那里没事干了。而在socket非阻塞调用期间，nginx可以继续处理其他的事件。
>       以上就是nginx异步非阻塞的实现，它形容的是nginx事件处理流程，而不是对epoll的调用。
>       缺点：
>           nginx的异步非阻塞完全依赖开发者来保证。
>           倘若有一个很水的开发者开发了一个第三方模块，而这个模块里调用了阻塞的API，或者是高CPU运算操作，那么就会拖累整个nginx进程。
>       底层是同步调用，上层逻辑是异步调用
>
>

- **介绍：**
>       同步，异步，阻塞，非阻塞的区别：
>           同步异步：指的是需不需要等待返回结果
>           阻塞和非阻塞：是指需不需要阻塞线程
>
>       处理 IO 的时候，阻塞和非阻塞都是同步 IO
>
>       同步异步：
>           同步：
>               需要不断轮询数据是否准备好了，或者一直在等待数据准备好
>           异步：
>               发送一个请求就立即返回，然后去干别的事情，当数据准备号了会通知进行相关处理
>           同步的实时性比较号，异步的并发性能比较好
>
>       阻塞和非阻塞：
>           阻塞：
>               当前线程不执行别的事情，一直再等待
>           非阻塞：
>               当前线程可以干别事情，间隔一段时间检查一下上次的数据有没有准备好
>
>
>       阻塞非阻塞，是指进程需要的数据如果未就绪，需不需要等待
>       同步异步，是指数据准备好后进行访问的机制，访问数据的时候，需不需要等待IO处理完成（同步需要等待IO完成，异步是IO完成后通知进程进行处理）
>
>
>       处理 IO 的时候，阻塞和非阻塞都是同步 IO
>
>
>

- **同步与异步：**
>       同步和异步关注的是消息通信机制 (synchronous communication/ asynchronous communication)
>
>       所谓同步，就是在发出一个*调用*时，在没有得到结果之前，该*调用*就不返回。但是一旦调用返回，就得到返回值了。
>           换句话说，就是由*调用者*主动等待这个*调用*的结果
>
>       而异步则是相反，*调用*在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在*调用*发出后，
>           *被调用者*通过状态、通知来通知调用者，或通过回调函数处理这个调用
>

- **阻塞与非阻塞：**
>       阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的状态
>
>       阻塞调用是指调用结果返回之前，当前线程会被挂起，调用线程只有在得到结果之后才会返回
>
>       非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程
>       阻塞与非阻塞与是否同步异步无关
>
>

- **unix域套接字：**
>       优点效率高：
>           用于同一台pc上运行的进程之间通信，它仅仅复制数据，不执行协议处理，不需要增加删除网络报头，无需计算校验和，不产生顺序号，无需发送确认报文。
>               1、unix域套接字通常比通信两端位于同一个主机的TCP套接字快出一倍
>               2、unix域套接字可用于在同一个主机上的不同进程之间传递描述符
>               3、unix能够提供额外的安全检查措施，较新的实现把客户的凭证（用户ID和组ID）提供给服务器
>           unix域套接字中用于标识客户和服务器的协议地址是普通文件系统中的路径名
>
>       unix域套接字简介：
>           unix域协议并不是一个实际的协议族，而是在单个主机上执行客户/服务器通信的一种方法，是进程间通信（IPC）的一种方式。
>           它提供两类套接字，字节流套接字（有点像TCP）和数据报套接字（有点像UDP），分别类似于TCP和UDP
>           UNIX域数据报服务是可靠的，不会丢失消息，也不会传递出错
>

- **tcpdump抓包：**
>       抓取主机 172.18.82.173 上所有收到（DST_IP）和发出（SRC_IP）的所有数据包：
>           tcpdump host 172.18.82.173
>           tcpdump -i any      # any 表示所有的网络接口
>       指定网卡抓包：
>           tcpdump udp -i eth0 -s 65535 -w handshake.pcap
>
>
>
>
>

- **待续：**
>       参考：https://www.zhihu.com/question/19732473  怎样理解阻塞非阻塞与同步异步的区别？
>           https://blog.csdn.net/lengxiao1993/article/details/78154467     同步/异步，阻塞/非阻塞概念深度解析
>           https://www.cnblogs.com/bakari/p/10748721.html      Linux 网络命令必知必会之 tcpdump，一份完整的抓包指南请查收！
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
