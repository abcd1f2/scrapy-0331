## 深入理解计算机系统 - 网络性能 - 网络性能
- **概述**
>
>       常用命令：
>           1、ifconfig和ip
>               ifconfig 和 ip 只显示了网络接口收发数据包的统计信息
>           2、netstat 或者 ss
>               查看套接字、网络栈、网络接口以及路由表的信息
>           3、sar
>               查看系统当前的网络吞吐量和 PPS
>               sar 增加 -n 参数就可以查看网络的统计信息
>                   比如网络接口（DEV）、网络接口错误（EDEV）、TCP、UDP、ICMP 等等
>           4、iperf 或者 netperf
>               iperf 和 netperf 都是最常用的网络性能测试工具，测试 TCP 和 UDP 的吞吐量
>
>
>           ss命令简介：
>               接收队列（Recv-Q）和发送队列（Send-Q）需要你特别关注，它们通常应该是0。当你发现它们不是 0 时，说明有网络包的堆积发生。当然还要注意，在不同套接字状态下，它们的含义不同
>               1、当套接字处于连接状态（Established）时
>                   Recv-Q 表示套接字缓冲还没有被应用程序取走的字节数（即接收队列长度）
>                   Send-Q 表示还没有被远端主机确认的字节数（即发送队列长度）
>               2、当套接字处于监听状态（Listening）时
>                   Recv-Q 表示 syn backlog 的当前值
>                   Send-Q 表示最大的 syn backlog 值
>                   而 syn backlog 是 TCP 协议栈中的半连接队列长度，相应的也有一个全连接队列（accept queue），它们都是维护 TCP 状态的重要机制
>

- **网络性能：**
>       通常用带宽、吞吐量、延时、PPS（Packet Per Second）等指标衡量网络的性能
>           带宽：
>               表示链路的最大传输速率，单位通常为 b/s （比特 / 秒）
>           吞吐量：
>               表示单位时间内成功传输的数据量，单位通常为 b/s（比特 / 秒）或者B/s（字节 / 秒）
>               吞吐量受带宽限制，而吞吐量 / 带宽，也就是该网络的使用率
>           延时：
>               表示从网络请求发出后，一直到收到远端响应，所需要的时间延迟
>               在不同场景中，这一指标可能会有不同含义。比如，它可以表示，建立连接需要的时间（比如 TCP握手延时），或一个数据包往返所需的时间（比如 RTT）
>           PPS：（ Packet Per Second（包 / 秒））
>               表示以网络包为单位的传输速率
>               PPS 通常用来评估网络的转发能力，比如硬件交换机，通常可以达到线性转发（即 PPS可以达到或者接近理论最大值）。而基于 Linux 服务器的转发，则容易受网络包大小的影响
>           网络的可用性（网络能否正常通信）、并发连接数（TCP 连接数量）、丢包率（丢包百分比）、重传率（重新传输的网络包比例）等也是常用的性能指标
>

- **协议层的性能测试-TCP/UDP 性能：**
>       iperf 和 netperf 都是最常用的网络性能测试工具，测试 TCP 和 UDP 的吞吐量
>       启动 iperf 服务端：
>           -s 表示启动服务端，-i 表示汇报间隔，-p 表示监听端口
>           iperf3 -s -i 1 -p 10000
>       运行 iperf 客户端
>           -c 表示启动客户端，192.168.0.30 为目标服务器的 IP
>           -b 表示目标带宽 (单位是 bits/s)
>           -t 表示测试时间
>           -P 表示并发数，-p 表示目标服务器监听端口
>           iperf3 -c 192.168.0.30 -b 1G -t 15 -P 2 -p 10000
>

- **DNS域名服务器：**
>       查看DNS域名服务器：
>           cat /etc/resolv.conf
>
>       DNS 服务通过资源记录的方式，来管理所有数据：
>           支持 A、CNAME、MX、NS、PTR 等多种类型的记录
>               A 记录，用来把域名转换成 IP 地址；
>               CNAME 记录，用来创建别名；
>               NS 记录，则表示该域名对应的域名服务器地址
>       当访问某个网址时，就需要通过 DNS 的 A 记录，查询该域名对应的 IP 地址，然后再通过该 IP 来访问 Web 服务
>       注意：
>           由于 114.114.114.114 并不是直接管理 time.geekbang.org 的域名服务器，所以查询结果是非权威的。
>           所以使用114.114.114.114服务器查询，只能得到 114.114.114.114 查询的结果
>

- **待续：**
>       参考：
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
